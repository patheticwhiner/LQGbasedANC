# LQR控制测试用例说明文档

## 1. 题设背景
本测试用例针对**一维弹簧-质量-阻尼系统**设计，验证线性二次型调节器(LQR)在二阶动态系统中的控制性能。该系统是控制理论中的经典教学案例，可直观反映LQR在**稳定性控制**和**能量优化**方面的核心能力。

---

## 2. 系统模型

### 2.1 物理组成
| 参数     | 符号 | 值   | 单位  |
| -------- | ---- | ---- | ----- |
| 质量     | m    | 1    | kg    |
| 弹簧刚度 | k    | 1    | N/m   |
| 阻尼系数 | b    | 0.5  | N·s/m |

### 2.2 动态方程
系统动力学由牛顿第二定律推导：  
$$
m\ddot{x} + b\dot{x} + kx = u
$$
其中：
- $ x $: 质量块位移（被控量）
- $ u $: 外部作用力（控制输入）

### 2.3 状态空间表示
选取状态变量：  
$$
\mathbf{x} = \begin{bmatrix} x_1 \\ x_2 \end{bmatrix} = \begin{bmatrix} \text{位移} \\ \text{速度} \end{bmatrix}
$$

导出状态方程：  
$$
\dot{\mathbf{x}} = 
\underbrace{\begin{bmatrix} 
0 & 1 \\ 
-k/m & -b/m 
\end{bmatrix}}_{A} \mathbf{x} + 
\underbrace{\begin{bmatrix} 0 \\ 1/m \end{bmatrix}}_{B} u
$$

具体参数化后：  
$$
A = \begin{bmatrix} 0 & 1 \\ -1 & -0.5 \end{bmatrix}, \quad 
B = \begin{bmatrix} 0 \\ 1 \end{bmatrix}
$$

---

## 3. 控制目标

### 3.1 初始条件与期望状态
| 参数     | 值     | 说明               |
| -------- | ------ | ------------------ |
| 初始位移 | 1 m    | 系统初始偏离平衡点 |
| 初始速度 | 0 m/s  | 静止释放           |
| 目标状态 | [0; 0] | 回归平衡位置       |

### 3.2 性能要求
1. **稳定性**：闭环系统需全局渐近稳定
2. **动态响应**：  
   - 位移在5秒内收敛至±0.05m误差带  
   - 控制输入无剧烈振荡
3. **能量优化**：控制能量消耗最小化

---

## 4. LQR设计参数

### 4.1 代价函数
$$
J = \int_0^\infty (\mathbf{x}^T Q \mathbf{x} + u^T R u) dt
$$

### 4.2 权重矩阵
| 矩阵 | 取值                                            | 物理意义                    |
| ---- | ----------------------------------------------- | --------------------------- |
| Q    | $\begin{bmatrix} 10 & 0 \\ 0 & 1 \end{bmatrix}$ | 位移误差权重 > 速度误差权重 |
| R    | 0.1                                             | 允许适度控制能量消耗        |

**设计意图**：  
- 通过$ Q(1,1)=10 $强化位移调节优先级  
- 通过$ R=0.1 $平衡响应速度与控制能耗

---

## 5. 预期行为分析

### 5.1 开环系统特性
- **特征值**：$ \lambda = -0.25 \pm j0.97 $  
  → 欠阻尼系统（阻尼比ζ ≈ 0.25）

### 5.2 闭环预期改进
1. **稳定性增强**：  
   LQR将特征值移至左半平面（例如：$ \lambda = -0.4 \pm j0.3 $）
2. **响应加速**：  
   调节时间从开环的≈15秒缩短至5秒内
3. **超量抑制**：  
   位移响应应无超调（临界阻尼特性）

---

## 6. 扩展场景说明

### 6.1 参数敏感性
- **质量增加20%**（m=1.2 kg）：需重新计算增益矩阵K
- **弹簧刚度变化**（k=2 N/m）：测试控制器鲁棒性

### 6.2 故障注入测试
- **执行器饱和**：限制控制力|u| ≤ 5N
- **传感器噪声**：在速度信号中添加高斯白噪声

---

## 7. 注意事项
1. 若实际位移未收敛，需检查：
   - 系统矩阵A/B是否建模错误
   - 权重矩阵Q/R是否比例失衡
2. 特征值实部需严格为负，否则违反稳定性条件
3. 控制能量计算应避免积分时间过短导致的误判